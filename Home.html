<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>6В</title>
    <style>
        /* Блокировка зума (масштабирования) */
        html,
        body {
            touch-action: pan-x pan-y;
            -ms-touch-action: pan-x pan-y;
            overflow-x: hidden;
        }

        /* Блокировка выделения текста (кроме полей ввода) */
        * {
            -webkit-touch-callout: none;
            /* iOS Safari */
            -webkit-user-select: none;
            /* Safari */
            -khtml-user-select: none;
            /* Konqueror HTML */
            -moz-user-select: none;
            /* Firefox */
            -ms-user-select: none;
            /* Internet Explorer/Edge */
            user-select: none;
            /* Non-prefixed version, currently supported by Chrome, Opera and Firefox */
        }

        /* Разрешаем выделение для полей ввода */
        input,
        textarea {
            -webkit-user-select: auto !important;
            user-select: auto !important;
        }

        :root {
            --primary: #4f46e5;
            --bg: #f3f4f6;
            --card: #ffffff;
            --text: #1f2937;
            --accent: #10b981;
            --danger: #ef4444;
            --share-color: #3b82f6;
            --profile-color: #8b5cf6;
            --teacher-color: #f59e0b;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding-bottom: 80px;
            -webkit-tap-highlight-color: transparent;
            touch-action: pan-y;
            overflow-x: hidden;
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow-y: auto;
        }

        input,
        textarea,
        button,
        select,
        div,
        a {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* --- Header --- */
        header {
            background: var(--primary);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 10;
        }

        header h1 {
            margin: 0;
            font-size: 1.5rem;
        }

        header p {
            margin: 5px 0 0;
            opacity: 0.8;
            font-size: 0.9rem;
        }

        /* --- Navigation --- */
        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
            z-index: 1000;
        }

        @media (min-width: 768px) {
            .nav-bar {
                position: static;
                width: auto;
                justify-content: center;
                gap: 20px;
                padding: 20px;
                background: transparent;
                box-shadow: none;
            }

            body {
                position: static;
                overflow-y: visible;
            }
        }

        .nav-item {
            border: none;
            background: none;
            font-size: 0.8rem;
            color: #6b7280;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-weight: bold;
            padding: 5px;
            width: 70px;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            width: 32px;
            height: 32px;
            margin-bottom: 4px;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.7;
            transition: opacity 0.2s, transform 0.2s;
        }

        .nav-item.active .nav-icon {
            opacity: 1;
            transform: scale(1.1);
        }

        .nav-item:hover .nav-icon {
            opacity: 0.9;
        }

        .nav-item[onclick*="schedule"] .nav-icon {
            background-image: url('https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/icons/album.png');
        }

        .nav-item[onclick*="rating"] .nav-icon {
            background-image: url('https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/icons/socialrating.png');
        }

        .nav-item[onclick*="news"] .nav-icon {
            background-image: url('https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/icons/news.png');
        }

        .nav-item[onclick*="gallery"] .nav-icon {
            background-image: url('https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/icons/album.png');
        }

        .nav-item[onclick*="profile"] .nav-icon {
            background-image: url('https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/icons/profile.png');
        }

        /* --- Layout --- */
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
            -webkit-user-select: none;
            user-select: none;
            touch-action: pan-y;
        }

        .section {
            display: none;
            animation: fadeIn 0.3s ease;
            -webkit-user-select: none;
            user-select: none;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            -webkit-user-select: none;
            user-select: none;
        }

        .card h2 {
            margin-top: 0;
            border-bottom: 2px solid var(--bg);
            padding-bottom: 10px;
            font-size: 1.2rem;
        }

        /* Стили для ограниченного доступа */
        .restricted-access {
            text-align: center;
            padding: 40px 20px;
            animation: fadeIn 0.5s;
        }

        .restricted-access .lock-icon {
            font-size: 60px;
            color: #9ca3af;
            margin-bottom: 20px;
        }

        .restricted-access h3 {
            color: var(--text);
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .restricted-access p {
            color: #6b7280;
            margin-bottom: 25px;
            font-size: 1rem;
            line-height: 1.5;
        }

        .login-prompt-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 1rem;
            margin-top: 10px;
        }

        .login-prompt-btn:hover {
            background: #4338ca;
        }

        /* --- Вкладка Профиль --- */
        .profile-login-form {
            max-width: 400px;
            margin: 0 auto;
            padding: 20px 0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
            box-sizing: border-box;
            -webkit-user-select: auto !important;
            user-select: auto !important;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .form-input.error {
            border-color: var(--danger);
            animation: shake 0.5s;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-5px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(5px);
            }
        }

        .login-btn {
            width: 100%;
            padding: 14px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 10px;
        }

        .login-btn:hover {
            background: #4338ca;
        }

        .login-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .error-message {
            color: var(--danger);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }

        .error-message.show {
            display: block;
            animation: fadeIn 0.3s;
        }

        .success-message {
            color: var(--accent);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }

        .success-message.show {
            display: block;
            animation: fadeIn 0.3s;
        }

        .profile-welcome {
            text-align: center;
            padding: 30px 20px;
            animation: fadeIn 0.5s;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--profile-color), var(--primary));
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: white;
            box-shadow: 0 8px 20px rgba(139, 92, 246, 0.3);
        }

        .profile-avatar.teacher {
            background: linear-gradient(135deg, var(--teacher-color), #d97706);
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.3);
        }

        .profile-name {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text);
        }

        .profile-class {
            font-size: 1.1rem;
            color: #6b7280;
            margin-bottom: 25px;
        }

        .teacher-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--teacher-color), #d97706);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-left: 10px;
            vertical-align: middle;
            box-shadow: 0 4px 6px rgba(245, 158, 11, 0.2);
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 30px;
        }

        .stat-item {
            background: #f8fafc;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e5e7eb;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6b7280;
        }

        .logout-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 30px;
            transition: background 0.3s;
        }

        .logout-btn:hover {
            background: #dc2626;
        }

        /* Стили для отображения пароля */
        .password-container {
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 10px;
            border: 1px solid #bae6fd;
        }

        .teacher-password-container {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 1px solid #fbbf24;
        }

        .password-label {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
            display: block;
        }

        .teacher-password-label {
            color: var(--teacher-color);
        }

        .password-value {
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            letter-spacing: 2px;
            padding: 10px 15px;
            background: white;
            border: 2px dashed #38bdf8;
            border-radius: 6px;
            text-align: center;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .teacher-password-value {
            border: 2px dashed var(--teacher-color);
            background: #fffbeb;
        }

        .password-value:hover {
            background: #f0f9ff;
            border-color: var(--primary);
        }

        .teacher-password-value:hover {
            background: #fef3c7;
            border-color: #d97706;
        }

        .password-value.copied {
            background: #d1fae5;
            border-color: var(--accent);
            animation: copyFlash 0.5s ease;
        }

        .teacher-password-value.copied {
            background: #d1fae5;
            border-color: var(--accent);
        }

        @keyframes copyFlash {
            0% {
                background: #d1fae5;
            }

            50% {
                background: #86efac;
            }

            100% {
                background: #d1fae5;
            }
        }

        .copy-hint {
            font-size: 0.8rem;
            color: #6b7280;
            margin-top: 5px;
            text-align: center;
        }

        /* Кнопка показать/скрыть пароль */
        .password-toggle {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #6b7280;
            cursor: pointer;
            font-size: 0.9rem;
        }

        /* --- Schedule Specific --- */
        .days-selector {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            background: #eef2ff;
            padding: 5px;
            border-radius: 10px;
            -webkit-user-select: none;
            user-select: none;
        }

        .day-btn {
            background: none;
            border: none;
            flex: 1;
            padding: 8px 0;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            color: #666;
            font-size: 0.9rem;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        .day-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 2px 4px rgba(79, 70, 229, 0.3);
        }

        .lesson-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            -webkit-user-select: none;
            user-select: none;
        }

        .lesson-time {
            font-weight: bold;
            color: var(--primary);
            min-width: 90px;
            font-size: 0.9rem;
        }

        .current-lesson {
            background-color: #d1fae5;
            border-left: 5px solid var(--accent);
            padding-left: 10px;
            border-radius: 4px;
        }

        /* --- Gallery & Video --- */
        .album-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            -webkit-user-select: none;
            user-select: none;
        }

        .album-btn {
            background: #e5e7eb;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        .album-btn.active {
            background: var(--primary);
            color: white;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 10px;
            -webkit-user-select: none;
            user-select: none;
        }

        .media-item {
            background: #ddd;
            padding-bottom: 100%;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s;
            -webkit-user-select: none;
            user-select: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
            touch-action: manipulation;
        }

        .media-item:hover {
            transform: scale(1.05);
            z-index: 2;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .media-item img,
        .media-item video {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }

        .video-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.6);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            pointer-events: none;
            z-index: 10;
        }

        /* --- Lightbox --- */
        .lightbox {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            justify-content: center;
            align-items: center;
            flex-direction: column;
            -webkit-user-select: none;
            user-select: none;
        }

        .lightbox-content {
            max-width: 95%;
            max-height: 80vh;
            border-radius: 4px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            pointer-events: auto;
            -webkit-user-drag: none;
            user-drag: none;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 40px;
            cursor: pointer;
            z-index: 2001;
            -webkit-user-select: none;
            user-select: none;
        }

        /* Rating & News styles */
        .rating-table {
            width: 100%;
            border-collapse: collapse;
            -webkit-user-select: none;
            user-select: none;
        }

        .rating-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .dev-badge {
            background: var(--danger);
            color: white;
            padding: 2px 10px;
            border-radius: 10px;
            font-size: 0.7rem;
            vertical-align: middle;
            margin-left: 10px;
        }

        /* --- Новости с возможностью поделиться --- */
        .news-item {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 8px;
            background: white;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
            position: relative;
            -webkit-user-select: none;
            user-select: none;
        }

        .news-item.highlighted {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid var(--share-color);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
            animation: pulse-highlight 2s ease-in-out;
        }

        @keyframes pulse-highlight {
            0% {
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
            }
        }

        .news-date {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 5px;
        }

        .news-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin: 5px 0;
            color: var(--text);
        }

        .news-text {
            margin: 10px 0;
            line-height: 1.5;
            color: #4b5563;
        }

        /* Панель "Поделиться" */
        .share-panel {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #e5e7eb;
        }

        .share-btn {
            background: var(--share-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s;
            touch-action: manipulation;
        }

        .share-btn:hover {
            background: #2563eb;
        }

        .share-btn i {
            font-size: 1.1rem;
        }

        .share-link-container {
            flex-grow: 1;
            margin-right: 15px;
            position: relative;
        }

        .share-link {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.85rem;
            color: #6b7280;
            background: #f9fafb;
            cursor: pointer;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            touch-action: manipulation;
        }

        .share-link:hover {
            background: #f3f4f6;
        }

        .copy-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            font-weight: 600;
            z-index: 3000;
            animation: fadeInOut 2s ease-in-out;
            display: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        @keyframes fadeInOut {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }

            20% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }

            80% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }

            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
        }

        /* Модальное окно поделиться */
        .share-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
            -webkit-user-select: none;
            user-select: none;
        }

        .share-modal-content {
            background: white;
            padding: 25px;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .share-modal-title {
            margin: 0 0 20px 0;
            font-size: 1.3rem;
            color: var(--text);
            text-align: center;
        }

        .share-text-notice {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 20px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 3px solid var(--share-color);
        }

        .share-text-notice code {
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            word-break: break-all;
            display: block;
            margin: 5px 0;
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: pre-wrap;
        }

        .share-options {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .share-option-btn {
            background: none;
            border: 2px solid #e5e7eb;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.3s;
            touch-action: manipulation;
        }

        .share-option-btn:hover {
            border-color: var(--share-color);
            background: #eff6ff;
            transform: scale(1.1);
        }

        .share-option-btn.telegram {
            color: #0088cc;
        }

        .share-option-btn.whatsapp {
            color: #25D366;
        }

        .share-option-btn.vk {
            color: #4C75A3;
        }

        .share-option-btn.copy {
            color: var(--primary);
        }

        #now-lesson-display {
            font-size: 1.1rem;
            padding: 10px;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 4px solid var(--accent);
            -webkit-user-select: none;
            user-select: none;
        }

        .no-context {
            context-menu: none;
        }

        p,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        span,
        div,
        td,
        th,
        li {
            -webkit-user-select: none;
            user-select: none;
        }

        /* Стили для показа пароля при входе */
        .password-input-wrapper {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #6b7280;
            cursor: pointer;
        }

        .forgot-password {
            text-align: center;
            margin-top: 15px;
            font-size: 0.85rem;
        }

        .forgot-password a {
            color: var(--primary);
            text-decoration: none;
            cursor: pointer;
        }

        .forgot-password a:hover {
            text-decoration: underline;
        }

        /* Стили для панели учителя */
        .teacher-panel {
            margin: 25px 0;
            padding: 20px;
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-radius: 12px;
            border: 2px solid #fbbf24;
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.15);
        }

        .teacher-panel h3 {
            color: var(--teacher-color);
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .teacher-panel h3 i {
            font-size: 1.2rem;
        }

        .teacher-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .teacher-action-btn {
            background: white;
            border: 2px solid #fbbf24;
            color: var(--teacher-color);
            padding: 12px 15px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .teacher-action-btn:hover {
            background: #fef3c7;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(245, 158, 11, 0.2);
        }

        .teacher-action-btn i {
            font-size: 1.5rem;
        }

        .teacher-action-btn span {
            font-size: 0.9rem;
        }

        /* Панель управления новостями */
        .news-management {
            margin: 25px 0;
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
            border: 2px solid #e5e7eb;
        }

        .news-management h4 {
            color: var(--primary);
            margin-top: 0;
            margin-bottom: 15px;
        }

        .news-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        .add-news-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            align-self: flex-start;
        }

        .add-news-btn:hover {
            background: #0da271;
        }

        /* Статистика класса */
        .class-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .class-stat-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e5e7eb;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .class-stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .class-stat-label {
            font-size: 0.9rem;
            color: #6b7280;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body class="no-context">

    <header>
        <h1>6В</h1>
        <p>Классный сайт 6В класса</p>
    </header>

    <nav class="nav-bar">
        <button class="nav-item active" onclick="switchTab('schedule')">
            <div class="nav-icon"></div>
            Расписание
        </button>
        <button class="nav-item" onclick="switchTab('rating')">
            <div class="nav-icon"></div>
            Рейтинг
        </button>
        <button class="nav-item" onclick="switchTab('news')">
            <div class="nav-icon"></div>
            Новости
        </button>
        <button class="nav-item" onclick="switchTab('gallery')">
            <div class="nav-icon"></div>
            Альбом
        </button>
        <button class="nav-item" onclick="switchTab('profile')">
            <div class="nav-icon"></div>
            Профиль
        </button>
    </nav>

    <div class="container">

        <div id="schedule" class="section active">
            <div class="card">
                <h2>Статус урока</h2>
                <div id="now-lesson-display">Загрузка...</div>
            </div>

            <div class="card">
                <h2>Расписание недели</h2>
                <div class="days-selector">
                    <button class="day-btn" onclick="selectDay(1)">ПН</button>
                    <button class="day-btn" onclick="selectDay(2)">ВТ</button>
                    <button class="day-btn" onclick="selectDay(3)">СР</button>
                    <button class="day-btn" onclick="selectDay(4)">ЧТ</button>
                    <button class="day-btn" onclick="selectDay(5)">ПТ</button>
                </div>

                <h3 id="selected-day-title" style="text-align:center; color: #666; margin-bottom: 15px;">Понедельник
                </h3>
                <div id="daily-schedule-list"></div>
            </div>
        </div>

        <div id="rating" class="section">
            <div class="card">
                <h2>Социальный рейтинг <span class="dev-badge">В РАЗРАБОТКЕ</span></h2>

                <!-- Контент для авторизованных пользователей -->
                <div id="rating-content" style="display: none;">
                    <p style="font-size: 0.9rem; color: #666;">Уже скоро...</p>
                    <table class="rating-table">
                        <tbody id="rating-list"></tbody>
                    </table>
                </div>

                <!-- Сообщение об ограничении доступа -->
                <div id="rating-restricted" class="restricted-access">
                    <div class="lock-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <h3>Доступ ограничен</h3>
                    <p>Для просмотра рейтинга необходимо войти в аккаунт</p>
                    <button class="login-prompt-btn" onclick="switchTab('profile')">
                        <i class="fas fa-sign-in-alt"></i> Войти в аккаунт
                    </button>
                    <p style="margin-top: 20px; font-size: 0.9rem; color: #9ca3af;">
                        Только ученики 6В класса имеют доступ к этому разделу
                    </p>
                </div>
            </div>
        </div>

        <div id="news" class="section">
            <div class="card">
                <h2>Последние новости</h2>
                <div id="news-container"></div>
            </div>
        </div>

        <div id="gallery" class="section">
            <div class="card">
                <h2>Альбом</h2>

                <!-- Контент для авторизованных пользователей -->
                <div id="gallery-content" style="display: none;">
                    <div class="album-tabs">
                        <button class="album-btn active" onclick="showAlbum('class5', event)">5 Класс</button>
                        <button class="album-btn" onclick="showAlbum('class6', event)">6 Класс</button>
                    </div>
                    <div id="class5-albums"></div>
                    <div id="class6-albums" style="display: none;"></div>
                </div>

                <!-- Сообщение об ограничении доступа -->
                <div id="gallery-restricted" class="restricted-access">
                    <div class="lock-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <h3>Доступ ограничен</h3>
                    <p>Для просмотра альбома необходимо войти в аккаунт</p>
                    <button class="login-prompt-btn" onclick="switchTab('profile')">
                        <i class="fas fa-sign-in-alt"></i> Войти в аккаунт
                    </button>
                    <p style="margin-top: 20px; font-size: 0.9rem; color: #9ca3af;">
                        Фотографии и видео доступны только ученикам 6В класса
                    </p>
                </div>
            </div>
        </div>

        <div id="profile" class="section">
            <div class="card">
                <h2>Профиль</h2>
                <div id="login-container">
                    <div class="profile-login-form">
                        <h3 style="text-align: center; margin-bottom: 25px; color: var(--primary);">Вход в аккаунт</h3>
                        <div class="form-group">
                            <label for="firstName">Имя:</label>
                            <input type="text" id="firstName" class="form-input" placeholder="Введите ваше имя"
                                autocomplete="off">
                            <div class="error-message" id="firstNameError">Пожалуйста, введите имя</div>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Фамилия:</label>
                            <input type="text" id="lastName" class="form-input" placeholder="Введите вашу фамилию"
                                autocomplete="off">
                            <div class="error-message" id="lastNameError">Пожалуйста, введите фамилию</div>
                        </div>
                        <div class="form-group">
                            <label for="password">Пароль:</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="password" class="form-input" placeholder="Введите пароль"
                                    autocomplete="off">
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility()">
                                    <i class="far fa-eye"></i>
                                </button>
                            </div>
                            <div class="error-message" id="passwordError">Пожалуйста, введите пароль</div>
                        </div>
                        <div class="error-message" id="loginError" style="text-align: center; margin-top: 15px;"></div>
                        <div class="success-message" id="loginSuccess" style="text-align: center; margin-top: 15px;">
                        </div>
                        <button class="login-btn" id="loginBtn" onclick="login()">Войти</button>

                        <div class="forgot-password">
                            <a onclick="showPasswordRecovery()">Забыли пароль?</a>
                        </div>

                        <p style="text-align: center; margin-top: 20px; color: #6b7280; font-size: 0.9rem;">
                            Введите имя, фамилию и пароль для входа в аккаунт
                        </p>
                    </div>
                </div>


                <!-- Форма восстановления пароля -->
                <div id="password-recovery" style="display: none;">
                    <div class="profile-login-form">
                        <h3 style="text-align: center; margin-bottom: 25px; color: var(--primary);">Восстановление
                            пароля</h3>

                        <!-- ВМЕСТО ФОРМЫ С ПОЛЯМИ ВВОДА ДОБАВИТЬ ПРОСТОЙ ТЕКСТ -->
                        <div style="text-align: center; padding: 20px;">
                            <p style="font-size: 1.1rem; color: var(--text); margin-bottom: 20px;">
                                Если вы забыли/потеряли пароль, то напишите @kolianchic2 в Telegram.
                            </p>
                        </div>

                        <button class="login-btn" style="background: #6b7280; margin-top: 10px;"
                            onclick="hidePasswordRecovery()">
                            Назад ко входу
                        </button>
                    </div>
                </div>

                <div id="profile-content" style="display: none;">
                    <div class="profile-welcome">
                        <div class="profile-avatar" id="profileAvatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <h2 class="profile-name" id="profileName"></h2>
                        <p class="profile-class" id="profileClass">Ученик 6В класса</p>

                        <!-- Блок с информацией о пароле -->
                        <div class="password-container" id="passwordContainer">
                            <span class="password-label" id="passwordLabel">Ваш пароль для входа:</span>
                            <div class="password-value" id="passwordDisplay" onclick="copyPassword()"></div>
                            <div class="copy-hint" id="copyHint">Нажмите на пароль, чтобы скопировать</div>
                            <p style="text-align: center; font-size: 0.85rem; color: #6b7280; margin-top: 10px;">
                                <i class="fas fa-info-circle"></i> Сохраните этот пароль для будущих входов
                            </p>
                        </div>

                        <!-- Панель учителя -->
                        <div id="teacher-panel" class="teacher-panel" style="display: none;">
                            <h3><i class="fas fa-chalkboard-teacher"></i> Панель учителя</h3>
                            <p style="color: #666; margin-bottom: 15px;">Информация</p>

                           

                            <!-- Статистика класса -->
                            <div class="class-stats">
                                <div class="class-stat-item">
                                    <div class="class-stat-value" id="totalStudents">33</div>
                                    <div class="class-stat-label">Учеников в классе</div>
                                </div>
                                
                                <div class="class-stat-item">
                                    <div class="class-stat-value" id="totalNews">2</div>
                                    <div class="class-stat-label">Новостей</div>
                                </div>
                                
                            </div>
                        </div>

                       

                        <button class="logout-btn" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> Выйти из аккаунта
                        </button>

                        <div
                            style="margin-top: 30px; padding: 15px; background: #f8fafc; border-radius: 8px; text-align: left;">
                            <h4 style="margin-top: 0; color: var(--primary);">Информация об аккаунте:</h4>
                            <p style="margin: 5px 0; color: #6b7280;"><strong>Ваш ID:</strong> <span
                                    id="profileId"></span>
                            </p>
                            <p style="margin: 5px 0; color: #6b7280;"><strong>Вход выполнен:</strong> <span
                                    id="loginTime"></span></p>
                            <p style="margin: 5px 0; color: #6b7280;"><strong>Данные сохранены на:</strong> <span
                                    id="deviceInfo"></span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Модальное окно поделиться -->
    <div id="share-modal" class="share-modal" onclick="closeShareModal(event)">
        <div class="share-modal-content" onclick="event.stopPropagation()">
            <h3 class="share-modal-title">Поделиться новостью</h3>
            <div class="share-text-notice" id="share-text-notice">
                <strong>Текст для отправки:</strong><br>
                <code id="share-text-display">С тобой хотят поделиться новостью:</code>
            </div>
            <div class="share-options">
                <button class="share-option-btn telegram" onclick="shareViaTelegram()" title="Telegram">
                    <i class="fab fa-telegram"></i>
                </button>
                <button class="share-option-btn whatsapp" onclick="shareViaWhatsApp()" title="WhatsApp">
                    <i class="fab fa-whatsapp"></i>
                </button>
                <button class="share-option-btn vk" onclick="shareViaVK()" title="ВКонтакте">
                    <i class="fab fa-vk"></i>
                </button>
                <button class="share-option-btn copy" onclick="copyShareLink()" title="Скопировать ссылку">
                    <i class="fas fa-copy"></i>
                </button>
            </div>
            <div class="share-link-container">
                <input type="text" id="share-url-input" class="share-link" readonly onclick="this.select()">
            </div>
            <div style="text-align: center; margin-top: 15px;">
                <button class="share-btn" onclick="closeShareModal()" style="background: #6b7280;">
                    <i class="fas fa-times"></i> Закрыть
                </button>
            </div>
        </div>
    </div>

    <!-- Уведомление о копировании -->
    <div id="copy-notification" class="copy-notification">
        <i class="fas fa-check-circle" style="margin-right: 8px;"></i> Пароль скопирован!
    </div>

    <div id="lightbox-modal" class="lightbox" onclick="closeLightbox(event)">
        <span class="close-btn">&times;</span>

        <img class="lightbox-content" id="lightbox-img" style="display:none;">

        <video class="lightbox-content" id="lightbox-video" controls style="display:none;"></video>
    </div>

    <script>
        // ============ БЛОКИРОВКА ЗУМА И ВЫДЕЛЕНИЯ ============
        // НЕ блокируем клавиши копирования и вставки для полей ввода
        document.addEventListener('touchstart', function (event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        }, { passive: false });

        document.addEventListener('gesturestart', function (event) {
            event.preventDefault();
        });

        document.addEventListener('gesturechange', function (event) {
            event.preventDefault();
        });

        document.addEventListener('gestureend', function (event) {
            event.preventDefault();
        });

        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        document.addEventListener('wheel', function (event) {
            if (event.ctrlKey) {
                event.preventDefault();
            }
        }, { passive: false });

        document.addEventListener('contextmenu', function (event) {
            // Разрешаем контекстное меню для полей ввода
            if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {
                return;
            }
            event.preventDefault();
            return false;
        });

        document.addEventListener('keydown', function (event) {
            // Разрешаем копирование и вставку для полей ввода
            if ((event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA')) {
                if (event.ctrlKey && (event.key === 'c' || event.key === 'C' ||
                    event.key === 'x' || event.key === 'X' ||
                    event.key === 'v' || event.key === 'V' ||
                    event.key === 'a' || event.key === 'A')) {
                    return; // Разрешаем стандартное поведение
                }
            }

            // Блокируем F12
            if (event.key === 'F12') {
                event.preventDefault();
                return false;
            }

            // Блокируем масштабирование
            if (event.ctrlKey && (event.key === '+' || event.key === '=' ||
                event.key === '-' || event.key === '_' ||
                event.key === '0')) {
                event.preventDefault();
                return false;
            }

            // Для остальных элементов блокируем Ctrl
            if (event.ctrlKey && !(event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA')) {
                event.preventDefault();
                return false;
            }
        });

        // Разрешаем выделение для полей ввода
        document.addEventListener('selectstart', function (event) {
            if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {
                return;
            }
            event.preventDefault();
            return false;
        });

        document.addEventListener('dragstart', function (event) {
            if (event.target.tagName === 'IMG' || event.target.tagName === 'VIDEO') {
                event.preventDefault();
                return false;
            }
        });

        /* ================================================================
           ФУНКЦИЯ ГЕНЕРАЦИИ ПАРОЛЕЙ
        ================================================================ */

        function generatePassword(length = 8) {
            const charset = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            let password = "";

            // Добавляем хотя бы по одному символу каждого типа для надежности
            password += charset[Math.floor(Math.random() * 26)]; // заглавная буква
            password += charset[26 + Math.floor(Math.random() * 26)]; // строчная буква
            password += charset[52 + Math.floor(Math.random() * 10)]; // цифра

            // Заполняем оставшиеся символы
            for (let i = 3; i < length; i++) {
                password += charset[Math.floor(Math.random() * charset.length)];
            }

            // Перемешиваем символы
            return password.split('').sort(() => Math.random() - 0.5).join('');
        }

        /* ================================================================
           ЗОНА РЕДАКТИРОВАНИЯ
        ================================================================ */

        // 1. УЧЕНИКИ
        const students = [
            "🥇 1", "🥈 2", "🥉 3"
        ];

        // 2. НОВОСТИ (добавлено поле id для каждой новости)
        let newsData = [
            {
                id: 2,
                date: "17.01.2026",
                title: "Благодарность за помощь",
                text: "Спасибо большое за помощь Андрею и Вике!"
            },

            {
                id: 1,
                date: "15.01.2026",
                title: "Первая новость!",
                text: "Сайт создан :) Новости уже скоро будут."
            },

        ];

        // 3. ЗВОНКИ
        const bellSchedule = [
            { start: "13:30", end: "14:10" },
            { start: "14:20", end: "15:00" },
            { start: "15:20", end: "16:00" },
            { start: "16:20", end: "17:00" },
            { start: "17:10", end: "17:50" },
            { start: "18:00", end: "18:40" }
        ];

        // 4. РАСПИСАНИЕ НА НЕДЕЛЮ (1-ПН, 2-ВТ, 3-СР, 4-ЧТ, 5-ПТ)
        const weekSchedule = {
            1: ["Русский язык", "Литература", "Биология", "Математика", "Физическая культура", "Физическая культура"],
            2: ["Русский язык", "Литература", "История", "Английский язык", "Музыка", "Изобразительное искусство"],
            3: ["Математика", "География", "Русский язык", "Русский язык", "Труд (Технология)", "Труд (Технология)"],
            4: ["История", "Английский язык", "Английский язык", "Русский язык", "Литература", "Математика"],
            5: ["Математика КВ", "История", "Русский язык", "Читательская грамотность КВ", "Математика", "Математика"]
        };

        // 5. МЕДИА (ФОТО И ВИДЕО)
        const albums = {
            class5: [
                {
                    name: "Форд Боярд",
                    items: [
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/5/FortBoyard/1.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/5/FortBoyard/2.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/5/FortBoyard/3.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/5/FortBoyard/4.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/5/FortBoyard/5.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/5/FortBoyard/6.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/5/FortBoyard/7.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/5/FortBoyard/8.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/5/FortBoyard/9.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/5/FortBoyard/10.jpg" },
                        {
                            type: 'video',
                            url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/5/FortBoyard/11.mp4",
                            preview: "https://placehold.co/600x400/black/white?text=Video"
                        },
                        {
                            type: 'video',
                            url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/5/FortBoyard/13.mp4",
                            preview: "https://placehold.co/600x400/black/white?text=Video"
                        }
                    ]
                },
                {
                    name: "2",
                    items: [
                        {
                            type: 'video',
                            url: "https://www.w3schools.com/html/mov_bbb.mp4",
                            preview: "https://placehold.co/600x400/black/white?text=Video"
                        }
                    ]
                }
            ],
            class6: [
                {
                    name: "Первое сентября",
                    items: [
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/6/FirstOfSeptember/1.jpg" },
                    ]
                },
                {
                    name: "Поездка на башню \"Хардерсхоф\"",
                    items: [
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/6/Hardershof/1.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/6/Hardershof/2.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/6/Hardershof/3.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/6/Hardershof/4.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/6/Hardershof/5.jpg" },
                        { type: 'photo', url: "https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/Resourses/Album/6/Hardershof/6.jpg" },
                    ]
                }
            ]
        };

        // 6. БАЗА ДАННЫХ УЧЕНИКОВ 6В КЛАССА С ПАРОЛЯМИ
        const studentsDatabase = [
            { "id": 1, "firstName": "София", "lastName": "Ахматская", "password": "Fz8XbT3q", "role": "student" },
            { "id": 2, "firstName": "Валерия", "lastName": "Великонская", "password": "Yv7kPn9s", "role": "student" },
            { "id": 3, "firstName": "Полина", "lastName": "Беспалова", "password": "Dw4mQh6f", "role": "student" },
            { "id": 4, "firstName": "Вероника", "lastName": "Бородина", "password": "Hj9pVd5l", "role": "student" },
            { "id": 5, "firstName": "Иван", "lastName": "Гранков", "password": "Bz6kWc8y", "role": "student" },
            { "id": 6, "firstName": "Яна", "lastName": "Долгополова", "password": "Rf7tGs9x", "role": "student" },
            { "id": 7, "firstName": "Устина", "lastName": "Журавлёва", "password": "Nh4pVk6a", "role": "student" },
            { "id": 8, "firstName": "Александр", "lastName": "Желтоноженко", "password": "Ew5mJd7s", "role": "student" },
            { "id": 9, "firstName": "Ульяна", "lastName": "Зуева", "password": "Tk8pYv6b", "role": "student" },
            { "id": 10, "firstName": "Василий", "lastName": "Иванов", "password": "Sg9nHp7d", "role": "student" },
            { "id": 11, "firstName": "Елизавета", "lastName": "Измайлова", "password": "Zq3wEc8v", "role": "student" },
            { "id": 12, "firstName": "Милянья", "lastName": "Исхнопуло", "password": "Px5nGm9f", "role": "student" },
            { "id": 13, "firstName": "Егор", "lastName": "Колосов", "password": "Vy7kPd6t", "role": "student" },
            { "id": 14, "firstName": "Марат", "lastName": "Короев", "password": "Bh9pWs7n", "role": "student" },
            { "id": 15, "firstName": "Эвелина", "lastName": "Кошева", "password": "Dm8kVp6f", "role": "student" },
            { "id": 16, "firstName": "Андрей", "lastName": "Кудинов", "password": "Tg5nJd9s", "role": "student" },
            { "id": 17, "firstName": "Тая", "lastName": "Лискина", "password": "Fq7pYv6b", "role": "student" },
            { "id": 18, "firstName": "Виктория", "lastName": "Лукина", "password": "Sh8nVm9d", "role": "student" },
            { "id": 19, "firstName": "Даниил", "lastName": "Мазницын", "password": "Lk5mJd7s", "role": "student" },
            { "id": 20, "firstName": "Варвара", "lastName": "Мичкина", "password": "Xv9pNs6b", "role": "student" },
            { "id": 21, "firstName": "Ксения", "lastName": "Попова", "password": "Cm8kWd7f", "role": "student" },
            { "id": 22, "firstName": "Роман", "lastName": "Северов", "password": "Gn5pYv9s", "role": "student" },
            { "id": 23, "firstName": "Юлия", "lastName": "Семенихина", "password": "Jh7kTm6b", "role": "student" },
            { "id": 24, "firstName": "Анна", "lastName": "Синяева", "password": "Kp8nMd9s", "role": "student" },
            { "id": 25, "firstName": "Кирилл", "lastName": "Слабых", "password": "Rf5mJd7v", "role": "student" },
            { "id": 26, "firstName": "Полина", "lastName": "Суконкина", "password": "Bw9pHs6d", "role": "student" },
            { "id": 27, "firstName": "Алиса", "lastName": "Фомакина", "password": "Nk7mTd9f", "role": "student" },
            { "id": 28, "firstName": "София", "lastName": "Франкевич", "password": "Pg5nYv6b", "role": "student" },
            { "id": 29, "firstName": "Николай", "lastName": "Харчевников", "password": "Th8kPm9s", "role": "student" },
            { "id": 30, "firstName": "Артём", "lastName": "Цитрин", "password": "Sj5mNd7v", "role": "student" },
            { "id": 31, "firstName": "Тимур", "lastName": "Шаркевич", "password": "Ck9pYv6b", "role": "student" },
            { "id": 32, "firstName": "Алиса", "lastName": "Шумская", "password": "Gh7mHd9s", "role": "student" },
            { "id": 33, "firstName": "Артём", "lastName": "Яземов", "password": "Lj5nWv6d", "role": "student" },
            { "id": 34, "firstName": "Людмила", "lastName": "Леоненко", "password": "kJP812Hb", "role": "teacher" }
        ];

        // Функция для отображения пароля в профиле
        function displayPassword() {
            if (currentUser && currentUser.password) {
                document.getElementById('passwordDisplay').textContent = currentUser.password;
                document.getElementById('copyHint').textContent = 'Нажмите на пароль, чтобы скопировать';
            }
        }

        // Функция для копирования пароля в буфер обмена
        function copyPassword() {
            if (!currentUser || !currentUser.password) return;

            const password = currentUser.password;
            const passwordDisplay = document.getElementById('passwordDisplay');
            const copyHint = document.getElementById('copyHint');

            try {
                navigator.clipboard.writeText(password).then(() => {
                    // Показываем уведомление о копировании
                    const notification = document.getElementById('copy-notification');
                    notification.style.display = 'block';

                    setTimeout(() => {
                        notification.style.display = 'none';
                    }, 2000);

                    // Анимация в самом поле пароля
                    passwordDisplay.classList.add('copied');
                    copyHint.textContent = '✓ Пароль скопирован!';

                    setTimeout(() => {
                        passwordDisplay.classList.remove('copied');
                        copyHint.textContent = 'Нажмите на пароль, чтобы скопировать';
                    }, 2000);
                }).catch(err => {
                    // Fallback для старых браузеров
                    const textArea = document.createElement('textarea');
                    textArea.value = password;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);

                    passwordDisplay.classList.add('copied');
                    copyHint.textContent = '✓ Пароль скопирован!';

                    setTimeout(() => {
                        passwordDisplay.classList.remove('copied');
                        copyHint.textContent = 'Нажмите на пароль, чтобы скопировать';
                    }, 2000);
                });
            } catch (err) {
                console.error('Ошибка при копировании пароля:', err);
                copyHint.textContent = 'Не удалось скопировать пароль';
            }
        }

        // Функция для показа/скрытия пароля при входе
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('password');
            const toggleButton = document.querySelector('.toggle-password i');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleButton.classList.remove('fa-eye');
                toggleButton.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                toggleButton.classList.remove('fa-eye-slash');
                toggleButton.classList.add('fa-eye');
            }
        }

        // Функция для показа формы восстановления пароля
        function showPasswordRecovery() {
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('password-recovery').style.display = 'block';
        }

        // Функция для скрытия формы восстановления пароля
        function hidePasswordRecovery() {
            document.getElementById('password-recovery').style.display = 'none';
            document.getElementById('login-container').style.display = 'block';
        }

        /* ================================================================
           СИСТЕМА ПРОФИЛЯ И АВТОРИЗАЦИИ
        ================================================================ */

        let currentUser = null;
        const STORAGE_KEY = 'class6v_profile_data';

        // Функция для проверки авторизации при загрузке страницы
        function checkAuthOnLoad() {
            const savedData = localStorage.getItem(STORAGE_KEY);
            if (savedData) {
                try {
                    const userData = JSON.parse(savedData);
                    // Проверяем срок действия сохраненных данных (30 дней)
                    const savedTime = new Date(userData.loginTime);
                    const currentTime = new Date();
                    const diffDays = (currentTime - savedTime) / (1000 * 60 * 60 * 24);

                    if (diffDays < 30) {
                        // Проверяем, существует ли пользователь в базе
                        const userExists = studentsDatabase.find(
                            student =>
                                student.firstName.toLowerCase() === userData.firstName.toLowerCase() &&
                                student.lastName.toLowerCase() === userData.lastName.toLowerCase() &&
                                student.password === userData.password
                        );

                        if (userExists) {
                            currentUser = {
                                ...userData,
                                ...userExists
                            };
                            showProfile();
                            displayPassword();
                            updateRestrictedSections();
                            setupTeacherFeatures();
                            return true;
                        }
                    } else {
                        // Данные устарели
                        localStorage.removeItem(STORAGE_KEY);
                    }
                } catch (e) {
                    console.error('Ошибка при чтении сохраненных данных:', e);
                    localStorage.removeItem(STORAGE_KEY);
                }
            }
            showLoginForm();
            updateRestrictedSections();
            return false;
        }

        // Функция входа
        function login() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const password = document.getElementById('password').value.trim();

            // Сброс предыдущих ошибок
            document.getElementById('firstNameError').classList.remove('show');
            document.getElementById('lastNameError').classList.remove('show');
            document.getElementById('passwordError').classList.remove('show');
            document.getElementById('loginError').classList.remove('show');
            document.getElementById('loginSuccess').classList.remove('show');

            // Валидация
            let hasError = false;

            if (!firstName) {
                document.getElementById('firstNameError').classList.add('show');
                document.getElementById('firstName').classList.add('error');
                hasError = true;
            } else {
                document.getElementById('firstName').classList.remove('error');
            }

            if (!lastName) {
                document.getElementById('lastNameError').classList.add('show');
                document.getElementById('lastName').classList.add('error');
                hasError = true;
            } else {
                document.getElementById('lastName').classList.remove('error');
            }

            if (!password) {
                document.getElementById('passwordError').classList.add('show');
                document.getElementById('password').classList.add('error');
                hasError = true;
            } else {
                document.getElementById('password').classList.remove('error');
            }

            if (hasError) return;

            // Поиск пользователя в базе данных
            const user = studentsDatabase.find(
                student =>
                    student.firstName.toLowerCase() === firstName.toLowerCase() &&
                    student.lastName.toLowerCase() === lastName.toLowerCase() &&
                    student.password === password
            );

            if (user) {
                // Успешный вход
                currentUser = {
                    ...user,
                    loginTime: new Date().toISOString(),
                    deviceInfo: getDeviceInfo()
                };

                // Сохраняем данные
                saveUserData();

                // Показываем профиль
                showProfile();
                displayPassword();

                // Обновляем видимость разделов с ограниченным доступом
                updateRestrictedSections();

                // Настраиваем фичи для учителя
                setupTeacherFeatures();

                // Показываем сообщение об успехе
                document.getElementById('loginSuccess').textContent = 'Вход выполнен успешно!';
                document.getElementById('loginSuccess').classList.add('show');

                // Очищаем поля формы
                document.getElementById('firstName').value = '';
                document.getElementById('lastName').value = '';
                document.getElementById('password').value = '';
            } else {
                // Ошибка входа
                document.getElementById('loginError').textContent = 'Неверное имя, фамилия или пароль';
                document.getElementById('loginError').classList.add('show');
                document.getElementById('firstName').classList.add('error');
                document.getElementById('lastName').classList.add('error');
                document.getElementById('password').classList.add('error');
            }
        }

        // Функция выхода
        function logout() {
            currentUser = null;
            localStorage.removeItem(STORAGE_KEY);
            showLoginForm();

            // Обновляем видимость разделов с ограниченным доступом
            updateRestrictedSections();

            // Скрываем панель учителя
            document.getElementById('teacher-panel').style.display = 'none';
            document.getElementById('news-management').style.display = 'none';

            // Очищаем поля формы
            document.getElementById('firstName').value = '';
            document.getElementById('lastName').value = '';
            document.getElementById('password').value = '';
            document.getElementById('loginError').classList.remove('show');
            document.getElementById('loginSuccess').classList.remove('show');

            // Скрываем форму восстановления пароля, если она была открыта
            hidePasswordRecovery();
        }

        // Функция сохранения данных пользователя
        function saveUserData() {
            if (currentUser) {
                const dataToSave = {
                    id: currentUser.id,
                    firstName: currentUser.firstName,
                    lastName: currentUser.lastName,
                    password: currentUser.password,
                    loginTime: currentUser.loginTime,
                    deviceInfo: currentUser.deviceInfo,
                    role: currentUser.role
                };
                localStorage.setItem(STORAGE_KEY, JSON.stringify(dataToSave));
            }
        }

        // Функция получения информации об устройстве
        function getDeviceInfo() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            if (isMobile) {
                return 'Мобильное устройство';
            } else {
                return 'Компьютер';
            }
        }

        // Функция показа формы входа
        function showLoginForm() {
            document.getElementById('login-container').style.display = 'block';
            document.getElementById('password-recovery').style.display = 'none';
            document.getElementById('profile-content').style.display = 'none';
        }

        // Функция показа профиля
        function showProfile() {
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('password-recovery').style.display = 'none';
            document.getElementById('profile-content').style.display = 'block';

            if (currentUser) {
                // Обновляем информацию в профиле
                document.getElementById('profileName').textContent = `${currentUser.firstName} ${currentUser.lastName}`;
                document.getElementById('profileId').textContent = `#${currentUser.id.toString().padStart(3, '0')}`;
                document.getElementById('loginTime').textContent = new Date(currentUser.loginTime).toLocaleString('ru-RU');
                document.getElementById('deviceInfo').textContent = currentUser.deviceInfo || getDeviceInfo();

                // Обновляем аватар
                const avatar = document.getElementById('profileAvatar');
                const initials = `${currentUser.firstName[0]}${currentUser.lastName[0]}`.toUpperCase();
                avatar.innerHTML = `<span style="font-weight: bold; font-size: 32px;">${initials}</span>`;
            }
        }

        // Функция для настройки фич учителя
        function setupTeacherFeatures() {
            if (currentUser && currentUser.id === 34) {
                // Показываем специальный интерфейс для учителя
                document.getElementById('profileClass').innerHTML = 'Классный руководитель 6В класса <span class="teacher-badge">УЧИТЕЛЬ</span>';

                // Добавляем класс teacher к аватару
                document.getElementById('profileAvatar').classList.add('teacher');

                // Изменяем стили блока с паролем
                const passwordContainer = document.getElementById('passwordContainer');
                const passwordLabel = document.getElementById('passwordLabel');
                const passwordDisplay = document.getElementById('passwordDisplay');

                passwordContainer.classList.add('teacher-password-container');
                passwordLabel.classList.add('teacher-password-label');
                passwordLabel.textContent = 'Пароль учителя:';
                passwordDisplay.classList.add('teacher-password-value');

                // Показываем панель учителя
                document.getElementById('teacher-panel').style.display = 'block';

                // Обновляем статистику
                updateClassStats();

                // Показываем панель управления новостями
                document.getElementById('news-management').style.display = 'block';

                // Устанавливаем текущую дату по умолчанию
                const today = new Date();
                const formattedDate = today.toLocaleDateString('ru-RU', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });
                document.getElementById('newsDate').value = formattedDate;

                // Разрешаем доступ ко всем разделам для учителя
                document.getElementById('rating-content').style.display = 'block';
                document.getElementById('rating-restricted').style.display = 'none';
                document.getElementById('gallery-content').style.display = 'block';
                document.getElementById('gallery-restricted').style.display = 'none';
            } else {
                // Обычный ученик
                document.getElementById('profileClass').textContent = 'Ученик 6В класса';
                document.getElementById('profileAvatar').classList.remove('teacher');

                // Убираем класс teacher с блока пароля
                const passwordContainer = document.getElementById('passwordContainer');
                const passwordLabel = document.getElementById('passwordLabel');
                const passwordDisplay = document.getElementById('passwordDisplay');

                passwordContainer.classList.remove('teacher-password-container');
                passwordLabel.classList.remove('teacher-password-label');
                passwordLabel.textContent = 'Ваш пароль для входа:';
                passwordDisplay.classList.remove('teacher-password-value');

                // Скрываем панель учителя
                document.getElementById('teacher-panel').style.display = 'none';
                document.getElementById('news-management').style.display = 'none';
            }
        }

        // Функция для обновления видимости разделов с ограниченным доступом
        function updateRestrictedSections() {
            const isLoggedIn = currentUser !== null;

            // Для обычных пользователей проверяем авторизацию
            if (currentUser && currentUser.id === 34) {
                // Учитель имеет доступ ко всему
                document.getElementById('gallery-content').style.display = 'block';
                document.getElementById('gallery-restricted').style.display = 'none';
                document.getElementById('rating-content').style.display = 'block';
                document.getElementById('rating-restricted').style.display = 'none';
            } else if (isLoggedIn) {
                // Обычный ученик
                document.getElementById('gallery-content').style.display = 'block';
                document.getElementById('gallery-restricted').style.display = 'none';
                document.getElementById('rating-content').style.display = 'block';
                document.getElementById('rating-restricted').style.display = 'none';
            } else {
                // Неавторизованный пользователь
                document.getElementById('gallery-content').style.display = 'none';
                document.getElementById('gallery-restricted').style.display = 'block';
                document.getElementById('rating-content').style.display = 'none';
                document.getElementById('rating-restricted').style.display = 'block';
            }
        }

        

        

        /* ================================================================
           СИСТЕМА ПОДЕЛИТЬСЯ НОВОСТЯМИ
        ================================================================ */

        let currentNewsId = null;
        const siteUrl = window.location.origin + window.location.pathname;

        function createNewsShareUrl(newsId) {
            const cleanUrl = siteUrl.split('?')[0];
            return `${cleanUrl}?news=${newsId}`;
        }

        function checkUrlParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const newsId = urlParams.get('news');

            if (newsId) {
                switchTab('news');

                setTimeout(() => {
                    highlightNews(newsId);
                }, 300);
            }
        }

        function highlightNews(newsId) {
            document.querySelectorAll('.news-item').forEach(item => {
                item.classList.remove('highlighted');
            });

            const newsElement = document.querySelector(`.news-item[data-news-id="${newsId}"]`);
            if (newsElement) {
                newsElement.classList.add('highlighted');

                newsElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });

                setTimeout(() => {
                    newsElement.classList.remove('highlighted');
                }, 3000);
            }
        }

        function openShareModal(newsId) {
            currentNewsId = newsId;
            const shareUrl = createNewsShareUrl(newsId);
            document.getElementById('share-url-input').value = shareUrl;
            document.getElementById('share-modal').style.display = 'flex';
        }

        function closeShareModal(event) {
            document.getElementById('share-modal').style.display = 'none';
        }

        function copyShareLink() {
            const shareUrl = document.getElementById('share-url-input');
            shareUrl.select();
            shareUrl.setSelectionRange(0, 99999);

            try {
                navigator.clipboard.writeText(shareUrl.value).then(() => {
                    showCopyNotification();
                }).catch(err => {
                    document.execCommand('copy');
                    showCopyNotification();
                });
            } catch (err) {
                document.execCommand('copy');
                showCopyNotification();
            }
        }

        function showCopyNotification() {
            const notification = document.getElementById('copy-notification');
            notification.style.display = 'block';

            setTimeout(() => {
                notification.style.display = 'none';
            }, 2000);
        }

        function shareViaTelegram() {
            const shareUrl = createNewsShareUrl(currentNewsId);
            const news = newsData.find(n => n.id == currentNewsId);
            const text = news ? encodeURIComponent(`Новость от ${news.date}: ${news.title}\n\n${shareUrl}`) : '';
            window.open(`https://t.me/share/url?url=${encodeURIComponent(shareUrl)}&text=${text}`, '_blank');
        }

        function shareViaWhatsApp() {
            const shareUrl = createNewsShareUrl(currentNewsId);
            const news = newsData.find(n => n.id == currentNewsId);
            const text = news ? encodeURIComponent(`Новость от ${news.date}: ${news.title} - ${shareUrl}`) : '';
            window.open(`https://wa.me/?text=${text}`, '_blank');
        }

        function shareViaVK() {
            const shareUrl = createNewsShareUrl(currentNewsId);
            window.open(`https://vk.com/share.php?url=${encodeURIComponent(shareUrl)}`, '_blank');
        }

        /* ================================================================
           СИСТЕМНАЯ ЧАСТЬ
        ================================================================ */

        // --- Переключение вкладок ---
        function switchTab(tabId) {
            document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');

            const menuIndex = ['schedule', 'rating', 'news', 'gallery', 'profile'].indexOf(tabId);
            if (menuIndex >= 0) document.querySelectorAll('.nav-item')[menuIndex].classList.add('active');
        }

        // --- Рейтинг и Новости ---
        function initBasicInfo() {
            // Рейтинг
            const tbody = document.getElementById('rating-list');
            tbody.innerHTML = students.map(s => `<tr><td>${s}</td><td style="font-weight:bold; color:var(--primary)">0.0</td></tr>`).join('');

            // Новости с кнопками поделиться
            const newsContainer = document.getElementById('news-container');
            let newsHtml = '';

            newsData.forEach(news => {
                const shareUrl = createNewsShareUrl(news.id);
                newsHtml += `
                <div class="news-item" data-news-id="${news.id}">
                    <div class="news-date">📅 ${news.date}</div>
                    <div class="news-title">${news.title}</div>
                    <div class="news-text">${news.text}</div>
                    <div class="share-panel">
                        <div class="share-link-container">
                            <input type="text" class="share-link" value="${shareUrl}" readonly onclick="this.select()">
                        </div>
                        <button class="share-btn" onclick="openShareModal(${news.id})">
                            <i class="fas fa-share-alt"></i> Поделиться
                        </button>
                    </div>
                </div>
                <hr style="opacity:0.3; margin: 5px 0;">`;
            });

            newsContainer.innerHTML = newsHtml;

            // Проверяем параметры URL для подсветки новости
            checkUrlParams();
        }

        // --- Альбомы и Видео ---
        function renderAlbums() {
            const renderGroup = (id, data) => {
                const container = document.getElementById(id);
                let html = '';
                data.forEach(album => {
                    html += `<div class="sub-album-title" style="margin-top:20px; font-weight:bold; color:#555">📁 ${album.name}</div><div class="gallery-grid">`;
                    album.items.forEach(item => {
                        if (item.type === 'photo') {
                            html += `<div class="media-item" onclick="openLightbox('photo', '${item.url}')">
                                    <img src="${item.url}" draggable="false" alt="${album.name}">
                                </div>`;
                        } else if (item.type === 'video') {
                            const poster = item.preview || "https://placehold.co/400x400/000/fff?text=Play";
                            html += `<div class="media-item" onclick="openLightbox('video', '${item.url}')">
                                    <img src="${poster}" draggable="false" alt="Видео">
                                    <div class="video-indicator">▶</div>
                                </div>`;
                        }
                    });
                    html += `</div>`;
                });
                container.innerHTML = html;
            }
            renderGroup('class5-albums', albums.class5);
            renderGroup('class6-albums', albums.class6);
        }

        function showAlbum(cls, event) {
            document.getElementById('class5-albums').style.display = (cls === 'class5') ? 'block' : 'none';
            document.getElementById('class6-albums').style.display = (cls === 'class6') ? 'block' : 'none';
            document.querySelectorAll('.album-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
        }

        // --- Лайтбокс ---
        function openLightbox(type, url) {
            const modal = document.getElementById("lightbox-modal");
            const imgEl = document.getElementById("lightbox-img");
            const videoEl = document.getElementById("lightbox-video");

            modal.style.display = "flex";
            document.body.style.overflow = 'hidden';

            if (type === 'photo') {
                imgEl.src = url;
                imgEl.style.display = "block";
                videoEl.style.display = "none";
                videoEl.pause();
            } else {
                videoEl.src = url;
                videoEl.style.display = "block";
                imgEl.style.display = "none";
                videoEl.play();
            }
        }

        function closeLightbox(e) {
            if (e.target.id === 'lightbox-modal' || e.target.classList.contains('close-btn')) {
                const modal = document.getElementById("lightbox-modal");
                const videoEl = document.getElementById("lightbox-video");

                modal.style.display = "none";
                document.body.style.overflow = 'auto';
                videoEl.pause();
                videoEl.src = "";
            }
        }

        // --- Расписание ---
        let viewingDay = new Date().getDay();
        if (viewingDay === 0 || viewingDay === 6) viewingDay = 1;

        function getMinutes(t) {
            const [h, m] = t.split(':').map(Number);
            return h * 60 + m;
        }

        function updateLiveStatus() {
            const now = new Date();
            const curDay = now.getDay();
            const curMin = now.getHours() * 60 + now.getMinutes();
            const lessons = weekSchedule[curDay];

            let text = "Свободное время или выходной";

            if (lessons) {
                lessons.forEach((lsn, idx) => {
                    if (idx >= bellSchedule.length) return;
                    const time = bellSchedule[idx];
                    const start = getMinutes(time.start);
                    const end = getMinutes(time.end);
                    const prevEnd = idx > 0 ? getMinutes(bellSchedule[idx - 1].end) : 0;

                    if (curMin >= start && curMin <= end) text = `🔴 Идет урок: <b>${lsn}</b> (до ${time.end})`;
                    else if (idx > 0 && curMin > prevEnd && curMin < start) text = `🟢 Перемена! Далее: ${lsn}`;
                    else if (idx === 0 && curMin < start && curMin > start - 30) text = `Скоро первый урок: ${lsn}`;
                });

                const lastEnd = getMinutes(bellSchedule[lessons.length - 1].end);
                if (curMin > lastEnd) text = "Уроки на сегодня закончились 🎉";
            }
            document.getElementById('now-lesson-display').innerHTML = text;

            if (viewingDay === curDay) renderScheduleList(viewingDay);
        }

        function renderScheduleList(dayIdx) {
            const list = document.getElementById('daily-schedule-list');
            const lessons = weekSchedule[dayIdx] || [];
            const dayNames = ["Воскресенье", "Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота"];

            document.getElementById('selected-day-title').innerText = dayNames[dayIdx];

            const now = new Date();
            const isToday = (dayIdx === now.getDay());
            const curMin = now.getHours() * 60 + now.getMinutes();

            let html = '';
            if (lessons.length === 0) {
                html = '<div style="text-align:center; padding:20px; color:#888">В этот день уроков нет</div>';
            } else {
                lessons.forEach((lsn, i) => {
                    if (i >= bellSchedule.length) return;
                    const time = bellSchedule[i];

                    let activeClass = '';
                    if (isToday) {
                        const start = getMinutes(time.start);
                        const end = getMinutes(time.end);
                        if (curMin >= start && curMin <= end) activeClass = 'current-lesson';
                    }

                    html += `
                <div class="lesson-row ${activeClass}">
                    <div class="lesson-time">${time.start} - ${time.end}</div>
                    <div class="lesson-name">${lsn}</div>
                </div>`;
                });
            }
            list.innerHTML = html;
        }

        function selectDay(dayIdx) {
            viewingDay = dayIdx;

            document.querySelectorAll('.day-btn').forEach((btn, idx) => {
                if (idx + 1 === dayIdx) btn.classList.add('active');
                else btn.classList.remove('active');
            });

            renderScheduleList(dayIdx);
        }

        function preloadIcons() {
            const icons = [
                'https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/icons/album.png',
                'https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/icons/socialrating.png',
                'https://raw.githubusercontent.com/NOF7351/V/refs/heads/main/icons/news.png'
            ];

            icons.forEach(icon => {
                const img = new Image();
                img.src = icon;
            });
        }

        // Инициализация
        preloadIcons();
        initBasicInfo();
        renderAlbums();
        selectDay(viewingDay);
        updateLiveStatus();
        setInterval(updateLiveStatus, 60000);
        checkAuthOnLoad();

    </script>

</body>

</html>
